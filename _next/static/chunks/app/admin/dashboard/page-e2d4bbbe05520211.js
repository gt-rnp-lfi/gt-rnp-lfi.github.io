(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{7419:(e,a,t)=>{Promise.resolve().then(t.bind(t,4459))},4459:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});var l=t(5155),s=t(2115),n=t(7058),r=t(8116),i=t(399),d=t(6046);function o(){let[e,a]=(0,s.useState)(""),[t,o]=(0,s.useState)(""),[c,u]=(0,s.useState)(""),[h,m]=(0,s.useState)([]),[x,p]=(0,s.useState)(null),[b,g]=(0,s.useState)(!0),f=(0,d.useRouter)(),w=(0,s.useCallback)(async()=>{m((await (0,n.GG)((0,n.rJ)(r.db,"news"))).docs.map(e=>({id:e.id,...e.data()})).sort((e,a)=>new Date(a.date).getTime()-new Date(e.date).getTime()))},[]);(0,s.useEffect)(()=>{let e=(0,i.hg)(r.j,e=>{e&&"gt.lfi.rnp@gmail.com"===e.email?(g(!1),w()):f.push("/admin/login")});return()=>e()},[f,w]);let N=async()=>{await (0,i.CI)(r.j),f.push("/admin/login")};if(b)return(0,l.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:"Verificando autentica\xe7\xe3o..."});let j=async l=>{l.preventDefault(),g(!0);try{await (0,n.gS)((0,n.rJ)(r.db,"news"),{title:e,content:t,link:c,date:new Date().toISOString()}),a(""),o(""),u(""),await w()}catch(e){console.log(e),alert("Erro ao adicionar not\xedcia")}finally{g(!1)}},v=async e=>{if(e.preventDefault(),x){g(!0);try{let e=(0,n.H9)(r.db,"news",x.id);await (0,n.mZ)(e,{title:x.title,content:x.content,link:x.link}),p(null),await w()}catch(e){console.log(e),alert("Erro ao editar not\xedcia")}finally{g(!1)}}},y=async e=>{if(window.confirm("Tem certeza que deseja excluir esta not\xedcia?")){g(!0);try{await (0,n.kd)((0,n.H9)(r.db,"news",e)),await w()}catch(e){console.log(e),alert("Erro ao excluir not\xedcia")}finally{g(!1)}}};return(0,l.jsx)("div",{className:"min-h-screen bg-gray-100 p-6",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Painel de Admin"}),(0,l.jsx)("button",{onClick:N,className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Sair"})]}),x?(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,l.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Editar Not\xedcia"}),(0,l.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,l.jsx)("input",{type:"text",value:x.title,onChange:e=>p({...x,title:e.target.value}),className:"w-full p-2 border rounded",placeholder:"T\xedtulo"}),(0,l.jsx)("textarea",{value:x.content,onChange:e=>p({...x,content:e.target.value}),className:"w-full p-2 border rounded h-32",placeholder:"Conte\xfado"}),(0,l.jsx)("input",{type:"url",value:x.link||"",onChange:e=>p({...x,link:e.target.value}),className:"w-full p-2 border rounded",placeholder:"Link (opcional)"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{type:"submit",disabled:b,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Salvar"}),(0,l.jsx)("button",{type:"button",onClick:()=>p(null),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Cancelar"})]})]})]}):(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,l.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Adicionar Nova Not\xedcia"}),(0,l.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,l.jsx)("input",{type:"text",value:e,onChange:e=>a(e.target.value),className:"w-full p-2 border rounded",placeholder:"T\xedtulo",required:!0}),(0,l.jsx)("textarea",{value:t,onChange:e=>o(e.target.value),className:"w-full p-2 border rounded h-32",placeholder:"Conte\xfado",required:!0}),(0,l.jsx)("input",{type:"url",value:c,onChange:e=>u(e.target.value),className:"w-full p-2 border rounded",placeholder:"Link (se aplicavel)"}),(0,l.jsx)("button",{type:"submit",disabled:b,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:b?"Adicionando...":"Adicionar Not\xedcia"})]})]}),(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,l.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Not\xedcias"}),(0,l.jsx)("div",{className:"space-y-4",children:h.map(e=>(0,l.jsx)("div",{className:"border p-4 rounded",children:(0,l.jsxs)("div",{className:"flex justify-between items-start",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-bold",children:e.title}),(0,l.jsx)("p",{className:"text-gray-600 mt-2",children:e.content}),e.link&&(0,l.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline mt-2 inline-block",children:"Ver mais"}),(0,l.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:new Date(e.date).toLocaleString("pt-BR")})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:()=>p(e),className:"bg-yellow-600 text-white px-3 py-1 rounded hover:bg-yellow-700",children:"Editar"}),(0,l.jsx)("button",{onClick:()=>y(e.id),className:"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",children:"Excluir"})]})]})},e.id))})]})]})})}},8116:(e,a,t)=>{"use strict";t.d(a,{db:()=>d,j:()=>i});var l=t(9904),s=t(7058),n=t(399);let r=(0,l.Wp)({apiKey:"AIzaSyBae_rXObFYcOFaLMerhzxuZJ10HYMToR0",authDomain:"gt-lfi-78549.firebaseapp.com",projectId:"gt-lfi-78549",storageBucket:"gt-lfi-78549.firebasestorage.app",messagingSenderId:"108875995391",appId:"1:108875995391:web:2ed9fede177b0c563d94ca",measurementId:"G-RD0BNNKXDV"}),i=(0,n.xI)(r),d=(0,s.aU)(r)},6046:(e,a,t)=>{"use strict";var l=t(6658);t.o(l,"useRouter")&&t.d(a,{useRouter:function(){return l.useRouter}})}},e=>{var a=a=>e(e.s=a);e.O(0,[992,523,459,441,517,358],()=>a(7419)),_N_E=e.O()}]);