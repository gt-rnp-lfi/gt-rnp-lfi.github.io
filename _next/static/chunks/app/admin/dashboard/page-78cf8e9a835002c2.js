(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{8830:(e,a,t)=>{Promise.resolve().then(t.bind(t,4459))},4459:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d});var l=t(5155),s=t(2115),r=t(7058),n=t(8116),i=t(6046);function d(){let[e,a]=(0,s.useState)(""),[t,d]=(0,s.useState)(""),[o,c]=(0,s.useState)(""),[u,h]=(0,s.useState)([]),[m,x]=(0,s.useState)(null),[p,b]=(0,s.useState)(!1),g=(0,i.useRouter)(),w=(0,s.useCallback)(async()=>{h((await (0,r.GG)((0,r.rJ)(n.db,"news"))).docs.map(e=>({id:e.id,...e.data()})).sort((e,a)=>new Date(a.date).getTime()-new Date(e.date).getTime()))},[]);(0,s.useEffect)(()=>{let e=n.j.currentUser;e&&"gt.lfi.rnp@gmail.com"===e.email||g.push("/admin/login"),w()},[g,w]);let f=async()=>{await n.j.signOut(),g.push("/admin/login")},N=async l=>{l.preventDefault(),b(!0);try{await (0,r.gS)((0,r.rJ)(n.db,"news"),{title:e,content:t,link:o,date:new Date().toISOString()}),a(""),d(""),c(""),await w()}catch(e){console.log(e),alert("Erro ao adicionar not\xedcia")}finally{b(!1)}},j=async e=>{if(e.preventDefault(),m){b(!0);try{let e=(0,r.H9)(n.db,"news",m.id);await (0,r.mZ)(e,{title:m.title,content:m.content,link:m.link}),x(null),await w()}catch(e){console.log(e),alert("Erro ao editar not\xedcia")}finally{b(!1)}}},v=async e=>{if(window.confirm("Tem certeza que deseja excluir esta not\xedcia?")){b(!0);try{await (0,r.kd)((0,r.H9)(n.db,"news",e)),await w()}catch(e){console.log(e),alert("Erro ao excluir not\xedcia")}finally{b(!1)}}};return(0,l.jsx)("div",{className:"min-h-screen bg-gray-100 p-6",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Painel de Admin"}),(0,l.jsx)("button",{onClick:f,className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Sair"})]}),m?(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,l.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Editar Not\xedcia"}),(0,l.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,l.jsx)("input",{type:"text",value:m.title,onChange:e=>x({...m,title:e.target.value}),className:"w-full p-2 border rounded",placeholder:"T\xedtulo"}),(0,l.jsx)("textarea",{value:m.content,onChange:e=>x({...m,content:e.target.value}),className:"w-full p-2 border rounded h-32",placeholder:"Conte\xfado"}),(0,l.jsx)("input",{type:"url",value:m.link||"",onChange:e=>x({...m,link:e.target.value}),className:"w-full p-2 border rounded",placeholder:"Link (opcional)"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{type:"submit",disabled:p,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Salvar"}),(0,l.jsx)("button",{type:"button",onClick:()=>x(null),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Cancelar"})]})]})]}):(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,l.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Adicionar Nova Not\xedcia"}),(0,l.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,l.jsx)("input",{type:"text",value:e,onChange:e=>a(e.target.value),className:"w-full p-2 border rounded",placeholder:"T\xedtulo",required:!0}),(0,l.jsx)("textarea",{value:t,onChange:e=>d(e.target.value),className:"w-full p-2 border rounded h-32",placeholder:"Conte\xfado",required:!0}),(0,l.jsx)("input",{type:"url",value:o,onChange:e=>c(e.target.value),className:"w-full p-2 border rounded",placeholder:"Link (se aplicavel)"}),(0,l.jsx)("button",{type:"submit",disabled:p,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:p?"Adicionando...":"Adicionar Not\xedcia"})]})]}),(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,l.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Not\xedcias"}),(0,l.jsx)("div",{className:"space-y-4",children:u.map(e=>(0,l.jsx)("div",{className:"border p-4 rounded",children:(0,l.jsxs)("div",{className:"flex justify-between items-start",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-bold",children:e.title}),(0,l.jsx)("p",{className:"text-gray-600 mt-2",children:e.content}),e.link&&(0,l.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline mt-2 inline-block",children:"Ver mais"}),(0,l.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:new Date(e.date).toLocaleString("pt-BR")})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:()=>x(e),className:"bg-yellow-600 text-white px-3 py-1 rounded hover:bg-yellow-700",children:"Editar"}),(0,l.jsx)("button",{onClick:()=>v(e.id),className:"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",children:"Excluir"})]})]})},e.id))})]})]})})}},8116:(e,a,t)=>{"use strict";t.d(a,{db:()=>d,j:()=>i});var l=t(9904),s=t(7058),r=t(399);let n=(0,l.Wp)({apiKey:"AIzaSyBae_rXObFYcOFaLMerhzxuZJ10HYMToR0",authDomain:"gt-lfi-78549.firebaseapp.com",projectId:"gt-lfi-78549",storageBucket:"gt-lfi-78549.firebasestorage.app",messagingSenderId:"108875995391",appId:"1:108875995391:web:2ed9fede177b0c563d94ca",measurementId:"G-RD0BNNKXDV"}),i=(0,r.xI)(n),d=(0,s.aU)(n)},6046:(e,a,t)=>{"use strict";var l=t(6658);t.o(l,"useRouter")&&t.d(a,{useRouter:function(){return l.useRouter}})}},e=>{var a=a=>e(e.s=a);e.O(0,[992,523,459,441,517,358],()=>a(8830)),_N_E=e.O()}]);